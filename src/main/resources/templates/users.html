<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Users Management</title>
</head>
<body>

<table>
    <tr>
        <th>User Name</th>
        <th>User Role</th>
        <th>Enabled</th>
        <th>Controls</th>
    </tr>
    <tr th:each="user: ${users}">
        <td th:utext="${user.getUsername()}"></td>
        <td th:utext="${user.getRole()}"></td>
        <td th:utext="${user.getEnabled()}"></td>
        <td>
            <form action="#" th:action="@{'/admin/users/{id}'(id=${user.getId()})}"  th:method="DELETE" >
                <input type="hidden"
                       th:name="${_csrf.parameterName}"
                       th:value="${_csrf.token}"
                />
                <button type="submit">Delete</button>
            </form>
            <form action="#" th:action="@{'/admin/users/{id}/enabled/{status}'(id=${user.getId()}, status=${!user.getEnabled()})}" th:method="POST" >
                <input type="hidden"
                       th:name="${_csrf.parameterName}"
                       th:value="${_csrf.token}"
                />
                <button type="submit" th:utext="${user.getEnabled() ? 'Disable' : 'Enable'}"></button>
            </form>
            <button>
                <a th:href="@{'/admin/users/{id}/role'(id=${user.getId()})}">Change Role</a>
            </button>
        </td>

    </tr>
</table>

</body>
</html>
